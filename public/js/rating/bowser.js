// Generated by CoffeeScript 1.10.0
(function() {
  var fileExport;

  this.teams = ["TDL", "LovelyDonuts", "ACMakeMeHappier", "null", "sto orz", "QAQ", "ResuscitatedHope", "Veleno", "deticxe", "GG", "firebug", "The South China Sea"];

  this.solve = function() {
    var array, dic, ele, i, j, k, l, len, rank, ref, ref1, ref2, res, res_rating, res_team, table, team;
    dic = {};
    ref = this.teams;
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      team = ref[i];
      dic[team] = i;
    }
    array = $('.list>li');
    array = (function() {
      var k, len1, results;
      results = [];
      for (k = 0, len1 = array.length; k < len1; k++) {
        ele = array[k];
        results.push(ele.innerText);
      }
      return results;
    })();
    rank = $('.rank>li');
    rank = (function() {
      var k, len1, results;
      results = [];
      for (k = 0, len1 = rank.length; k < len1; k++) {
        ele = rank[k];
        results.push(parseInt(ele.innerText));
      }
      return results;
    })();
    table = (function() {
      var k, ref1, results;
      results = [];
      for (i = k = 0, ref1 = this.teams.length; 0 <= ref1 ? k < ref1 : k > ref1; i = 0 <= ref1 ? ++k : --k) {
        results.push(0);
      }
      return results;
    }).call(this);
    for (i = k = 0, ref1 = array.length; 0 <= ref1 ? k < ref1 : k > ref1; i = 0 <= ref1 ? ++k : --k) {
      if (dic[array[i]] !== void 0) {
        table[dic[array[i]]] = rank[i];
      }
    }
    console.log(table);
    if (this.table == null) {
      this.table = [];
    }
    if (this.contest_num == null) {
      this.contest_num = 1;
    }
    this.table.push(table);
    res = this.build(this.table, this.teams);
    res_team = $('.team>li');
    res_rating = $('.rating>li');
    for (i = l = 0, ref2 = this.teams.length; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {
      res_team[i].innerHTML = res[i].teamName;
      res_rating[i].innerHTML = parseInt(res[i].rating);
    }
    ++this.contest_num;
    $('#contest')[0].innerHTML = "Contest #" + this.contest_num;
    return $('#rating')[0].innerHTML = "Rating #" + (this.contest_num - 1);
  };

  this.showNow = function() {
    var i, j, ref, res, res_rating, res_team;
    this.table = [];
    this.contest_num = table.length + 1;
    res = this.build(table, this.teams);
    res_team = $('.team>li');
    res_rating = $('.rating>li');
    for (i = j = 0, ref = this.teams.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
      res_team[i].innerHTML = res[i].teamName;
      res_rating[i].innerHTML = parseInt(res[i].rating);
    }
    $('#contest')[0].innerHTML = "Contest #" + this.contest_num;
    return $('#rating')[0].innerHTML = "Rating #" + (this.contest_num - 1);
  };

  fileExport = function(data, fileName, extension) {
    var aLink, blob, evt;
    aLink = document.createElement("a");
    blob = new Blob([data]);
    evt = document.createEvent("MouseEvents");
    evt.initEvent("click", false, false);
    aLink.download = fileName + "." + extension;
    aLink.href = URL.createObjectURL(blob);
    return aLink.dispatchEvent(evt);
  };

  this.downloadRank = function() {
    return fileExport(JSON.stringify(this.table), "rank_" + (new Date()), "txt");
  };

}).call(this);

//# sourceMappingURL=bowser.js.map
