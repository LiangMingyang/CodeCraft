// Generated by CoffeeScript 1.10.0
(function() {
  'use strict';
  this.angular.module('acm-register', []).controller('acm-register.ctrl', function($scope, $http, $timeout) {
    $scope.confirmed = "waiting";
    $scope.list = [];
    $http.get('/api/acm-register/status').then(function(res) {
      $scope.confirmed = res.data.confirmed || false;
      $scope.user = res.data.user || false;
      return console.log(res.data);
    }, function(res) {
      return console.log(res.data.error);
    });
    $scope.form = {
      nickname: "",
      student_id: "",
      phone: ""
    };
    $scope.confirm = function() {
      if ($scope.form.nickname === "" || $scope.form.student_id === "" || $scope.form.phone === "") {
        alert("请认真一点");
        return;
      }
      return $('#double_check').modal('show');
    };
    return $scope.double_confirm = function() {
      if ($scope.form.nickname === "" || $scope.form.student_id === "") {
        alert("请认真一点");
        $('#double_check').modal('hide');
        return;
      }
      $http.post('/api/acm-register/confirm', $scope.form).then(function(res) {
        return $scope.confirmed = res.data.confirmed;
      }, function(res) {
        return alert(res.data.error);
      });
      return $('#double_check').modal('hide');
    };
  }).controller('acm-register.list', function($scope, $http) {
    $scope.list = [];
    return $http.get('/api/acm-register/list').then(function(res) {
      return $scope.list = res.data.users;
    }, function(res) {
      return alert(res.data.error);
    });
  });

}).call(this);

//# sourceMappingURL=app.js.map
